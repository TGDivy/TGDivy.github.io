---
import { Image } from "astro:assets";
import Base from "@layouts/Base.astro";
import { markdownify } from "@lib/utils/textConverter";
import { getEntryBySlug } from "astro:content";
import Social from "@layouts/components/Social.astro";
import social from "@config/social.json";
import config from "@config/config.json";
import {
  IoCalendar,
  IoCall,
  IoGift,
  IoLocation,
  IoMail,
} from "react-icons/io5/index.js";

const entry = await getEntryBySlug("about", "index");
const { Content } = await entry.render();
const { title, description, meta_title, image, what_i_do, professional_title } =
  entry.data;
const { address, email, phone, city, country, birthday } = config.contactinfo;

// random background colors
const colors = [
  "bg-gradient-to-r from-indigo-100 to-blue-200 hover:from-blue-200 hover:to-indigo-100",
  "bg-gradient-to-r from-red-100 to-amber-100 hover:from-amber-100 hover:to-red-100",
  "bg-gradient-to-r from-green-100 to-indigo-100 hover:from-indigo-100 hover:to-green-100",
  "bg-gradient-to-r from-amber-100 to-blue-100 hover:from-blue-100 hover:to-amber-100",
  "bg-gradient-to-r from-blue-100 to-green-100 hover:from-green-100 hover:to-blue-100",
  "bg-gradient-to-r from-teal-100 to-green-100 hover:from-green-100 hover:to-teal-100",
];
---

<Base
  title={title}
  meta_title={meta_title}
  description={description}
  image={image}
>
  <div
    class="large-container mr-auto ml-auto grid grid-cols-12 md:gap-10 justify-between lg:mt-60 lg:mb-12"
  >
    <div
      class="col-span-12 lg:col-span-4 lg:block static lg:sticky lg:h-screen top-60"
    >
      <div
        class="w-full mb-6 lg:mb-0 mx-auto relative bg-white text-center dark:bg-dark-primary px-6 rounded-[20px] mt-[160px] lg:mt-0"
      >
        <Image
          src={image}
          width={295}
          height={395}
          alt={title}
          class="w-[240px] absolute left-[50%] transform -translate-x-[50%] h-[240px] drop-shadow-xl mx-auto rounded-[20px] -mt-[140px]"
          alt="about"
        />
        <div class="pt-[100px] pb-8">
          <h3 class="mt-6 mb-1 font-semibold dark:text-white">
            {meta_title}
          </h3>
          <h6 class="text-sm text-gray-500 dark:text-gray-400 mt-1">
            {professional_title}
          </h6>
          <Social source={social} className="social-icons-on-dark mt-6" />

          <div class="p-7 rounded-2xl mt-7 bg-slate-100 opacity-80">
            {
              [
                {
                  icon: <IoCall />,
                  title: "Phone",
                  content: phone,
                },
                {
                  icon: <IoMail />,
                  title: "Email",
                  content: email,
                },
                {
                  icon: <IoLocation />,
                  title: "Address",
                  content: `${city}, ${country}`,
                },
                {
                  icon: <IoCalendar />,
                  title: "Birthday",
                  content: birthday,
                },
              ].map((item, index) => (
                <div
                  class={
                    "flex p-2.5 border-slate-300 align-middle" +
                    (index === 3 ? "" : "mb-2.5 border-b")
                  }
                >
                  <div class="flex h-8 w-8 items-center justify-center transition-all duration-300 ease-in-out rounded-lg hover:bg-gradient-to-r hover:bg-primary hover:text-white dark:bg-black text-icon-color-two shadow-md place-self-center bg-white">
                    {item.icon}
                  </div>
                  <div class="text-left ml-2.5">
                    <p class="font-semibold text-sm">{item.title}:</p>
                    <h6 class="hover:underline hover:cursor-pointer">
                      {item.content}
                    </h6>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </div>
    </div>

    <div
      class="col-span-12 lg:col-span-8 gap-8 grid grid-cols-1 relative lg:mt-20"
    >
      <div class="bg-white rounded-2xl dark:bg-dark-primary">
        <div class="lg:pt-10 md:py-10 px-2 sm:px-5 md:px-10 lg:px-14">
          <h3 class="mt-6 mb-1 font-semibold dark:text-white">
            {title}
          </h3>
          <div class="content text-md text-primary-300 md:text-primary-100">
            <Content />
          </div>
        </div>
        <div class="pb-12 px-2 sm:px-5 md:px-10 lg:px-14">
          <h3 class="mb-3 font-semibold dark:text-white">
            {what_i_do.title}
          </h3>
          <div class="grid gap-8 grid-cols-1 md:grid-cols-2 xl:grid-cols-2">
            {
              what_i_do.items.map((item: any, index: number) => (
                <div
                  class={`flex gap-4 rounded-xl p-6 border-slate-70 opacity-95 ${
                    colors[index % colors.length]
                  } transition-all duration-500 ease-in-out hover:shadow-lg hover:border-slate-700 border-2`}
                >
                  <div class="space-y-2">
                    <h5 class="font-semibold">{item.title}</h5>
                    <p class="text-sm text-slate-700">{item.description}</p>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </div>
      <div class="bg-white lg:rounded-2xl dark:bg-dark-primary">
        <div class="pt-12 md:py-12 px-2 sm:px-5 md:px-10 lg:px-14">
          <h2 class="mt-6 mb-1 font-semibold dark:text-white">
            {title}
          </h2>
          <div class="content text-md text-primary-300 md:text-primary-100">
            <Content />
          </div>
        </div>
      </div>
      <div class="bg-white lg:rounded-2xl dark:bg-dark-primary">
        <div class="pt-12 md:py-12 px-2 sm:px-5 md:px-10 lg:px-14">
          <h2 class="mt-6 mb-1 font-semibold dark:text-white">
            {title}
          </h2>
          <div class="content text-md text-primary-300 md:text-primary-100">
            <Content />
          </div>
        </div>
      </div>
    </div>
  </div>
</Base>
