---
import type { CollectionEntry } from "astro:content";
import { humanize } from "@lib/utils/textConverter";
import { Image } from "astro:assets";

interface Props {
  posts: CollectionEntry<"posts">;
}

const { posts } = Astro.props;
const { data, slug, id } = posts;
const { title, description, image } = data;
---

<div
  class={"relative flex w-full flex-col rounded-xl bg-white text-gray-700 transition-all duration-500 ease-in-out hover:border-slate-700 border-2 border-transparent group"}
>
  {
    image && (
      <div class="relative mx-4 mt-4 overflow-hidden text-white shadow-lg rounded-xl bg-blue-gray-500 bg-clip-border shadow-blue-gray-500/40 h-[230px] min-h-[230px] max-h-[230px]">
        <a
          href={`/${slug}`}
          class="rounded-lg block hover:text-primary overflow-hidden"
        >
          <Image
            class="group-hover:scale-[1.03] transition duration-300 w-full"
            src={image}
            alt={title}
            transition:name={`posts-image-${id}`}
            width={445}
            height={330}
          />
        </a>
      </div>
    )
  }
  <div class="p-6 h-full flex flex-col">
    {
      title && (
        <div class="flex items-center justify-between mb-3">
          <h5 class="block font-sans text-xl antialiased font-medium leading-snug tracking-normal text-blue-gray-900">
            <a
              href={`/${slug}`}
              transition:name={`posts-title-${id}`}
              class="block hover:text-primary transition duration-300"
            >
              {humanize(title)}
            </a>
          </h5>
        </div>
      )
    }
    {
      description && (
        <p class="block font-sans text-base antialiased font-light leading-relaxed text-gray-700 flex-1">
          <a
            href={`/${slug}`}
            class="block hover:text-primary transition duration-300"
          >
            {description}
          </a>
        </p>
      )
    }
    <slot />
  </div>
</div>
